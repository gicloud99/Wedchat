<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>Tr√≤ chuy·ªán  üí¨</title>
  <style>
    body { font-family: Arial, sans-serif; background: #f4f4f4; padding: 20px; }
    #messages { border: 1px solid #ccc; height: 300px; overflow-y: scroll; padding: 10px; background: white; margin-bottom: 10px; }
    .msg { margin: 5px 0; }
    .me { color: blue; font-weight: bold; }
    .you { color: green; font-weight: bold; }
    input, button { padding: 10px; font-size: 16px; }
  </style>
  <script src="https://www.gstatic.com/firebasejs/10.12.0/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.12.0/firebase-database-compat.js"></script>
</head>
<body>

  <h2>üí¨ Tr√≤ chuy·ªán  </h2>
  <p>Nh·∫≠p t√™n c·ªßa b·∫°n:</p>
  <input id="username" placeholder="T√™n c·ªßa b·∫°n..." />
  <div id="chat" style="display:none;">
    <div id="messages"></div>
    <input id="messageInput" placeholder="Nh·∫≠p tin nh·∫Øn..." />
    <button onclick="sendMessage()">G·ª≠i</button>
  </div>

  <script>
    // C·∫•u h√¨nh Firebase (do ƒê·∫°t cung c·∫•p)
    const firebaseConfig = {
  apiKey: "AIzaSyDfSkuPYXjOqvC0DJDVlsQP3Ws-SPfErR0",
  authDomain: "chat2nguoi.firebaseapp.com",
  databaseURL: "https://chat2nguoi-default-rtdb.asia-southeast1.firebasedatabase.app",
  projectId: "chat2nguoi",
  storageBucket: "chat2nguoi.appspot.com",
  messagingSenderId: "764820761307",
  appId: "1:764820761307:web:3773e28124203edac83afe",
  measurementId: "G-2558EKQ8JN"
};

    firebase.initializeApp(firebaseConfig);
    const db = firebase.database();

    let username = "";

    document.getElementById("username").addEventListener("change", function () {
      username = this.value.trim();
      if (username !== "") {
        document.getElementById("chat").style.display = "block";
      }
    });

    function sendMessage() {
      const msgInput = document.getElementById("messageInput");
      const text = msgInput.value.trim();
      if (text !== "") {
        db.ref("messages").push({
          name: username,
          message: text,
          timestamp: Date.now()
        });
        msgInput.value = "";
      }
    }

    const msgBox = document.getElementById("messages");
    db.ref("messages").on("child_added", function (snapshot) {
      const data = snapshot.val();
      const div = document.createElement("div");
      div.classList.add("msg");
      const who = data.name === username ? "me" : "you";
      div.innerHTML = `<span class="${who}">${data.name}:</span> ${data.message}`;
      msgBox.appendChild(div);
      msgBox.scrollTop = msgBox.scrollHeight;
    });
  </script>

</body>
      </html>
